{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\purru\\\\OneDrive - Universidad Pontificia Comillas\\\\Documentos\\\\3_Tercero\\\\PAT\\\\Repositorios\\\\Ejercicio Tres en React-ayas\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet winner = null;\nexport default function Board() {\n  _s();\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n  useEffect(() => {\n    const interval = setInterval(() => {\n      reloadBoard().then(() => {\n        const newBoard = getBoard();\n        if (JSON.stringify(squares) !== JSON.stringify(newBoard)) {\n          setSquares(newBoard || Array(9).fill(null));\n          clearInterval(interval); // Detenemos el intervalo si hay cambios\n        }\n      });\n      winner = getWinner();\n      if (winner) {\n        clearInterval(interval); // Detenemos el intervalo si hay un ganador\n      }\n    }, 5000);\n\n    // Cleanup del intervalo al desmontar el componente\n    return () => clearInterval(interval);\n  }, [squares]); // Dependencia en `squares` para detectar cambios\n\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n    turno(i).then(() => {\n      setSquares(getBoard() || Array(9).fill(\"Err\"));\n      winner = getWinner();\n      setXIsNext(!xIsNext);\n    });\n  }\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n  function handleJoinGame() {\n    joinGame().then(() => {\n      console.log(\"Unido al juego\");\n      setSquares(getBoard() || Array(9).fill(null));\n    }).catch(error => {\n      console.error(\"Error al unirse al juego:\", error);\n    });\n  }\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${xIsNext ? \"X\" : \"O\"}`;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[0],\n        onSquareClick: () => handleClick(0)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[1],\n        onSquareClick: () => handleClick(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[2],\n        onSquareClick: () => handleClick(2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[3],\n        onSquareClick: () => handleClick(3)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[4],\n        onSquareClick: () => handleClick(4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[5],\n        onSquareClick: () => handleClick(5)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[6],\n        onSquareClick: () => handleClick(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[7],\n        onSquareClick: () => handleClick(7)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[8],\n        onSquareClick: () => handleClick(8)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Board, \"a4FEKMv8ICtvMaNZQJALuu1tL6U=\");\n_c = Board;\nfunction Square({\n  value,\n  onSquareClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"square\",\n    onClick: onSquareClick,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Square;\nvar _c, _c2;\n$RefreshReg$(_c, \"Board\");\n$RefreshReg$(_c2, \"Square\");","map":{"version":3,"names":["useState","useEffect","getBoard","reloadBoard","createGame","getWinner","turno","turnoO","joinGame","jsxDEV","_jsxDEV","Fragment","_Fragment","winner","Board","_s","xIsNext","setXIsNext","squares","setSquares","Array","fill","interval","setInterval","then","newBoard","JSON","stringify","clearInterval","handleClick","i","handleNewGame","handleJoinGame","console","log","catch","error","newGameButton","document","getElementById","joinGameButton","addEventListener","removeEventListener","status","children","className","fileName","_jsxFileName","lineNumber","columnNumber","Square","value","onSquareClick","_c","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/purru/OneDrive - Universidad Pontificia Comillas/Documentos/3_Tercero/PAT/Repositorios/Ejercicio Tres en React-ayas/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\n\nlet winner = null;\n\nexport default function Board() {\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      reloadBoard().then(() => {\n        const newBoard = getBoard();\n        if (JSON.stringify(squares) !== JSON.stringify(newBoard)) {\n          setSquares(newBoard || Array(9).fill(null));\n          clearInterval(interval); // Detenemos el intervalo si hay cambios\n        }\n      });\n\n      winner = getWinner();\n      if (winner) {\n        clearInterval(interval); // Detenemos el intervalo si hay un ganador\n      }\n    }, 5000);\n\n    // Cleanup del intervalo al desmontar el componente\n    return () => clearInterval(interval);\n  }, [squares]); // Dependencia en `squares` para detectar cambios\n\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n\n    turno(i).then(() => {\n      setSquares(getBoard() || Array(9).fill(\"Err\"));\n      winner = getWinner();\n      setXIsNext(!xIsNext);\n    });\n  }\n\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n\n  function handleJoinGame() {\n    joinGame()\n      .then(() => {\n        console.log(\"Unido al juego\");\n        setSquares(getBoard() || Array(9).fill(null));\n      })\n      .catch((error) => {\n        console.error(\"Error al unirse al juego:\", error);\n      });\n  }\n\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${xIsNext ? \"X\" : \"O\"}`;\n\n  return (\n    <>\n      <div className=\"status\">{status}</div>\n      <div className=\"board-row\">\n        <Square value={squares[0]} onSquareClick={() => handleClick(0)} />\n        <Square value={squares[1]} onSquareClick={() => handleClick(1)} />\n        <Square value={squares[2]} onSquareClick={() => handleClick(2)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[3]} onSquareClick={() => handleClick(3)} />\n        <Square value={squares[4]} onSquareClick={() => handleClick(4)} />\n        <Square value={squares[5]} onSquareClick={() => handleClick(5)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[6]} onSquareClick={() => handleClick(6)} />\n        <Square value={squares[7]} onSquareClick={() => handleClick(7)} />\n        <Square value={squares[8]} onSquareClick={() => handleClick(8)} />\n      </div>\n    </>\n  );\n}\n\nfunction Square({ value, onSquareClick }) {\n  return (\n    <button className=\"square\" onClick={onSquareClick}>\n      {value}\n    </button>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}