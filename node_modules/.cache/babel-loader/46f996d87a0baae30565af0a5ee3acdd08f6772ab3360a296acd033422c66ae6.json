{"ast":null,"code":"import{useState,useEffect}from\"react\";import{getBoard,reloadBoard,createGame,getWinner,turno,joinGame,leaveGame,getInGame,resetGame}from\"./Api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Board(){const[xIsNext,setXIsNext]=useState(true);const[squares,setSquares]=useState(getBoard()||Array(9).fill(null));const[winner,setWinner]=useState(null);useEffect(()=>{if(!getInGame())return;const interval=setInterval(()=>{reloadBoard().then(()=>{const newBoard=getBoard();if(JSON.stringify(squares)!==JSON.stringify(newBoard)){setSquares(newBoard||Array(9).fill(null));const currentWinner=getWinner();if(currentWinner){setWinner(currentWinner);}}});},5000);return()=>clearInterval(interval);},[squares]);function handleClick(i){console.log(getWinner());if(squares[i]||getWinner())return;turno(i).then(()=>{setSquares(getBoard()||Array(9).fill(null));setWinner(getWinner());setXIsNext(!xIsNext);}).catch(error=>{console.error(\"Error al hacer el movimiento:\",error);alert(\"No es tu turno de mover\");});}function handleNewGame(){createGame();setSquares(getBoard()||Array(9).fill(null));setWinner(null);}function handleLeaveGame(){leaveGame().then(()=>{setSquares(Array(9).fill(null));setWinner(null);}).catch(error=>{console.error(\"Error al salir del juego:\",error);});}function handleResetGame(){resetGame().then(()=>{setSquares(Array(9).fill(null));setWinner(null);}).catch(error=>{console.error(\"Error al reiniciar el juego:\",error);});}function handleJoinGame(){joinGame().then(()=>{console.log(\"Unido al juego\");setSquares(getBoard()||Array(9).fill(null));setWinner(null);}).catch(error=>{console.error(\"Error al unirse al juego:\",error);});}useEffect(()=>{const newGameButton=document.getElementById(\"newGame\");const joinGameButton=document.getElementById(\"joinGame\");const leaveGameButton=document.getElementById(\"leaveGame\");const resetGameButton=document.getElementById(\"resetGame\");if(newGameButton){newGameButton.addEventListener(\"click\",handleNewGame);}if(joinGameButton){joinGameButton.addEventListener(\"click\",handleJoinGame);}if(leaveGameButton){leaveGameButton.addEventListener(\"click\",handleLeaveGame);}if(resetGameButton){resetGameButton.addEventListener(\"click\",handleResetGame);}return()=>{if(newGameButton){newGameButton.removeEventListener(\"click\",handleNewGame);}if(joinGameButton){joinGameButton.removeEventListener(\"click\",handleJoinGame);}if(leaveGameButton){leaveGameButton.removeEventListener(\"click\",handleLeaveGame);}if(resetGameButton){resetGameButton.removeEventListener(\"click\",handleResetGame);}};},[]);let status;if(getInGame()===false){status=\"No estás en un juego.\";}else{status=winner?`Ganador: ${winner}!`:`Siguiente jugador: ${xIsNext?\"X\":\"O\"}`;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:status}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{value:squares[0],onSquareClick:()=>handleClick(0)}),/*#__PURE__*/_jsx(Square,{value:squares[1],onSquareClick:()=>handleClick(1)}),/*#__PURE__*/_jsx(Square,{value:squares[2],onSquareClick:()=>handleClick(2)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{value:squares[3],onSquareClick:()=>handleClick(3)}),/*#__PURE__*/_jsx(Square,{value:squares[4],onSquareClick:()=>handleClick(4)}),/*#__PURE__*/_jsx(Square,{value:squares[5],onSquareClick:()=>handleClick(5)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{value:squares[6],onSquareClick:()=>handleClick(6)}),/*#__PURE__*/_jsx(Square,{value:squares[7],onSquareClick:()=>handleClick(7)}),/*#__PURE__*/_jsx(Square,{value:squares[8],onSquareClick:()=>handleClick(8)})]})]});}function Square(_ref){let{value,onSquareClick}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:\"square\",onClick:onSquareClick,children:value});}","map":{"version":3,"names":["useState","useEffect","getBoard","reloadBoard","createGame","getWinner","turno","joinGame","leaveGame","getInGame","resetGame","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Board","xIsNext","setXIsNext","squares","setSquares","Array","fill","winner","setWinner","interval","setInterval","then","newBoard","JSON","stringify","currentWinner","clearInterval","handleClick","i","console","log","catch","error","alert","handleNewGame","handleLeaveGame","handleResetGame","handleJoinGame","newGameButton","document","getElementById","joinGameButton","leaveGameButton","resetGameButton","addEventListener","removeEventListener","status","children","className","Square","value","onSquareClick","_ref","onClick"],"sources":["C:/Users/purru/OneDrive - Universidad Pontificia Comillas/Documentos/3_Tercero/PAT/Repositorios/practica4/Ejercicio Tres en React-ayas/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, joinGame, leaveGame, getInGame, resetGame } from \"./Api\";\n\nexport default function Board() {\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n  const [winner, setWinner] = useState(null);\n\n  useEffect(() => {\n    \n    if (!getInGame()) return;\n\n    const interval = setInterval(() => {\n      reloadBoard().then(() => {\n        const newBoard = getBoard();\n        if (JSON.stringify(squares) !== JSON.stringify(newBoard)) {\n          setSquares(newBoard || Array(9).fill(null));\n\n          const currentWinner = getWinner();\n          if (currentWinner) {\n            setWinner(currentWinner);\n          }\n        }\n      });\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [squares]);\n\n  function handleClick(i) {\n    console.log(getWinner());\n    if (squares[i] || getWinner()) return;\n\n    turno(i).then(() => {\n      setSquares(getBoard() || Array(9).fill(null));\n      setWinner(getWinner());\n      setXIsNext(!xIsNext);\n    })\n    .catch((error) => {\n      console.error(\"Error al hacer el movimiento:\", error);\n      alert(\"No es tu turno de mover\");\n    });\n  }\n\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n    setWinner(null);\n  }\n\n  function handleLeaveGame() {\n    leaveGame()\n    .then(() => {\n      setSquares(Array(9).fill(null));\n      setWinner(null);\n    })\n    .catch((error) => {\n      console.error(\"Error al salir del juego:\", error);\n    });\n  }\n\n  function handleResetGame() {\n    resetGame()\n    .then(() => {\n      setSquares(Array(9).fill(null));\n      setWinner(null);\n    })\n    .catch((error) => {\n      console.error(\"Error al reiniciar el juego:\", error);\n    });\n  }\n\n  function handleJoinGame() {\n    joinGame()\n    .then(() => {\n      console.log(\"Unido al juego\");\n      setSquares(getBoard() || Array(9).fill(null));\n      setWinner(null);\n    })\n    .catch((error) => {\n      console.error(\"Error al unirse al juego:\", error);\n    });\n  }\n\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n    const leaveGameButton = document.getElementById(\"leaveGame\");\n    const resetGameButton = document.getElementById(\"resetGame\");\n\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    if (leaveGameButton) {\n      leaveGameButton.addEventListener(\"click\", handleLeaveGame);\n    }\n\n    if (resetGameButton) {\n      resetGameButton.addEventListener(\"click\", handleResetGame);\n    }\n\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n      if (leaveGameButton) {\n        leaveGameButton.removeEventListener(\"click\", handleLeaveGame);\n      }\n      if (resetGameButton) {\n        resetGameButton.removeEventListener(\"click\", handleResetGame);\n      }\n    };\n  }, []);\n\n  let status;\n  if (getInGame() === false) {\n    status = \"No estás en un juego.\";\n  } else {\n    status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${xIsNext ? \"X\" : \"O\"}`;\n  }\n\n  return (\n    <>\n      <div className=\"status\">{status}</div>\n      <div className=\"board-row\">\n        <Square value={squares[0]} onSquareClick={() => handleClick(0)} />\n        <Square value={squares[1]} onSquareClick={() => handleClick(1)} />\n        <Square value={squares[2]} onSquareClick={() => handleClick(2)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[3]} onSquareClick={() => handleClick(3)} />\n        <Square value={squares[4]} onSquareClick={() => handleClick(4)} />\n        <Square value={squares[5]} onSquareClick={() => handleClick(5)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[6]} onSquareClick={() => handleClick(6)} />\n        <Square value={squares[7]} onSquareClick={() => handleClick(7)} />\n        <Square value={squares[8]} onSquareClick={() => handleClick(8)} />\n      </div>\n    </>\n  );\n}\n\nfunction Square({ value, onSquareClick }) {\n  return (\n    <button className=\"square\" onClick={onSquareClick}>\n      {value}\n    </button>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}