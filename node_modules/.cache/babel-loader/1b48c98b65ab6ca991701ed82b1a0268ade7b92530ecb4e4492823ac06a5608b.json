{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\purru\\\\OneDrive - Universidad Pontificia Comillas\\\\Documentos\\\\3_Tercero\\\\PAT\\\\Repositorios\\\\practica4\\\\Ejercicio Tres en React-ayas\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet winner = null;\nexport default function Board() {\n  _s();\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n    if (xIsNext) {\n      turno(i).then(() => {\n        setSquares(getBoard() || Array(9).fill(\"Err\"));\n        winner = getWinner();\n        setXIsNext(!xIsNext);\n      });\n    } else {\n      turnoO(i).then(() => {\n        setSquares(getBoard() || Array(9).fill(\"Err\"));\n        winner = getWinner();\n        setXIsNext(!xIsNext);\n      });\n    }\n  }\n\n  // Función para reiniciar el juego\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n\n  // Función para unirse a un juego\n  function handleJoinGame() {\n    joinGame().then(response => {\n      console.log(\"Unido al juego\");\n      setSquares(getBoard() || Array(9).fill(null));\n    }).catch(error => {\n      console.error(\"Error al unirse al juego:\", error);\n    });\n  }\n\n  // useEffect para manejar los botones externos\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    // Cleanup para evitar múltiples listeners\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${winner}`;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[0],\n        onSquareClick: () => handleClick(0)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[1],\n        onSquareClick: () => handleClick(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[2],\n        onSquareClick: () => handleClick(2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[3],\n        onSquareClick: () => handleClick(3)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[4],\n        onSquareClick: () => handleClick(4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[5],\n        onSquareClick: () => handleClick(5)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[6],\n        onSquareClick: () => handleClick(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[7],\n        onSquareClick: () => handleClick(7)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[8],\n        onSquareClick: () => handleClick(8)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Board, \"PHElxuvy2laGNFiT+e8zF61zZx0=\");\n_c = Board;\nfunction Square({\n  value,\n  onSquareClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"square\",\n    onClick: onSquareClick,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Square;\nvar _c, _c2;\n$RefreshReg$(_c, \"Board\");\n$RefreshReg$(_c2, \"Square\");","map":{"version":3,"names":["useState","useEffect","getBoard","reloadBoard","createGame","getWinner","turno","turnoO","joinGame","jsxDEV","_jsxDEV","Fragment","_Fragment","winner","Board","_s","xIsNext","setXIsNext","squares","setSquares","Array","fill","handleClick","i","then","handleNewGame","handleJoinGame","response","console","log","catch","error","newGameButton","document","getElementById","joinGameButton","addEventListener","removeEventListener","status","children","className","fileName","_jsxFileName","lineNumber","columnNumber","Square","value","onSquareClick","_c","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/purru/OneDrive - Universidad Pontificia Comillas/Documentos/3_Tercero/PAT/Repositorios/practica4/Ejercicio Tres en React-ayas/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\n\nlet winner = null;\n\nexport default function Board() {\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n    \n    if (xIsNext) {\n      turno(i).then(() => {\n        setSquares(getBoard() || Array(9).fill(\"Err\"));\n        winner = getWinner();\n        setXIsNext(!xIsNext);\n      });\n    } else {\n      turnoO(i).then(() => {\n        setSquares(getBoard() || Array(9).fill(\"Err\"));\n        winner = getWinner();\n        setXIsNext(!xIsNext);\n      });\n    }\n  }\n\n  // Función para reiniciar el juego\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n\n  // Función para unirse a un juego\n  function handleJoinGame() {\n    joinGame()\n      .then((response) => {\n        console.log(\"Unido al juego\");\n        setSquares(getBoard() || Array(9).fill(null));\n      })\n      .catch((error) => {\n        console.error(\"Error al unirse al juego:\", error);\n      });\n  }\n\n  // useEffect para manejar los botones externos\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    // Cleanup para evitar múltiples listeners\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${winner}`;\n\n  return (\n    <>\n      <div className=\"status\">{status}</div>\n      <div className=\"board-row\">\n        <Square value={squares[0]} onSquareClick={() => handleClick(0)} />\n        <Square value={squares[1]} onSquareClick={() => handleClick(1)} />\n        <Square value={squares[2]} onSquareClick={() => handleClick(2)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[3]} onSquareClick={() => handleClick(3)} />\n        <Square value={squares[4]} onSquareClick={() => handleClick(4)} />\n        <Square value={squares[5]} onSquareClick={() => handleClick(5)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[6]} onSquareClick={() => handleClick(6)} />\n        <Square value={squares[7]} onSquareClick={() => handleClick(7)} />\n        <Square value={squares[8]} onSquareClick={() => handleClick(8)} />\n      </div>\n    </>\n  );\n}\n\nfunction Square({ value, onSquareClick }) {\n  return (\n    <button className=\"square\" onClick={onSquareClick}>\n      {value}\n    </button>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}