{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\purru\\\\OneDrive - Universidad Pontificia Comillas\\\\Documentos\\\\3_Tercero\\\\PAT\\\\Repositorios\\\\Ejercicio Tres en React-ayas\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet winner = null;\nexport default function Board() {\n  _s();\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n  /*const actualizarPartida = setInterval(() => {\n    reloadBoard().then(() => {\n      if(squares !== getBoard()){\n        setSquares(getBoard() || Array(9).fill(null));\n        clearInterval(actualizarPartida);\n      }\n    });\n    winner = getWinner();\n    if(winner){\n      clearInterval(actualizarPartida);\n    }}\n  , 5000);\n  clearInterval(actualizarPartida);*/\n\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n    turno(i).then(() => {\n      setSquares(getBoard() || Array(9).fill(\"Err\"));\n      winner = getWinner();\n      setXIsNext(!xIsNext);\n    });\n    const actualizarPartida = setInterval(() => {\n      reloadBoard().then(() => {\n        if (squares !== getBoard()) {\n          setSquares(getBoard() || Array(9).fill(null));\n          clearInterval(actualizarPartida);\n        }\n      });\n      winner = getWinner();\n      if (winner) {\n        clearInterval(actualizarPartida);\n      }\n    }, 5000);\n  }\n\n  // Función para reiniciar el juego\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n\n  // Función para unirse a un juego\n  function handleJoinGame() {\n    joinGame().then(response => {\n      console.log(\"Unido al juego\");\n      setSquares(getBoard() || Array(9).fill(null));\n    }).catch(error => {\n      console.error(\"Error al unirse al juego:\", error);\n    });\n    const actualizarPartida = setInterval(() => {\n      reloadBoard().then(() => {\n        if (squares !== getBoard()) {\n          setSquares(getBoard() || Array(9).fill(null));\n          clearInterval(actualizarPartida);\n        }\n      });\n      winner = getWinner();\n      if (winner) {\n        clearInterval(actualizarPartida);\n      }\n    }, 5000);\n  }\n\n  // useEffect para manejar los botones externos\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    // Cleanup para evitar múltiples listeners\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${winner}`;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"status\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[0],\n        onSquareClick: () => handleClick(0)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[1],\n        onSquareClick: () => handleClick(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[2],\n        onSquareClick: () => handleClick(2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[3],\n        onSquareClick: () => handleClick(3)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[4],\n        onSquareClick: () => handleClick(4)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[5],\n        onSquareClick: () => handleClick(5)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-row\",\n      children: [/*#__PURE__*/_jsxDEV(Square, {\n        value: squares[6],\n        onSquareClick: () => handleClick(6)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[7],\n        onSquareClick: () => handleClick(7)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Square, {\n        value: squares[8],\n        onSquareClick: () => handleClick(8)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Board, \"PHElxuvy2laGNFiT+e8zF61zZx0=\");\n_c = Board;\nfunction Square({\n  value,\n  onSquareClick\n}) {\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"square\",\n    onClick: onSquareClick,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Square;\nvar _c, _c2;\n$RefreshReg$(_c, \"Board\");\n$RefreshReg$(_c2, \"Square\");","map":{"version":3,"names":["useState","useEffect","getBoard","reloadBoard","createGame","getWinner","turno","turnoO","joinGame","jsxDEV","_jsxDEV","Fragment","_Fragment","winner","Board","_s","xIsNext","setXIsNext","squares","setSquares","Array","fill","handleClick","i","then","actualizarPartida","setInterval","clearInterval","handleNewGame","handleJoinGame","response","console","log","catch","error","newGameButton","document","getElementById","joinGameButton","addEventListener","removeEventListener","status","children","className","fileName","_jsxFileName","lineNumber","columnNumber","Square","value","onSquareClick","_c","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/purru/OneDrive - Universidad Pontificia Comillas/Documentos/3_Tercero/PAT/Repositorios/Ejercicio Tres en React-ayas/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { getBoard, reloadBoard, createGame, getWinner, turno, turnoO, joinGame } from \"./Api\";\n\nlet winner = null;\n\nexport default function Board() {\n  const [xIsNext, setXIsNext] = useState(true);\n  const [squares, setSquares] = useState(getBoard() || Array(9).fill(null));\n  /*const actualizarPartida = setInterval(() => {\n    reloadBoard().then(() => {\n      if(squares !== getBoard()){\n        setSquares(getBoard() || Array(9).fill(null));\n        clearInterval(actualizarPartida);\n      }\n    });\n    winner = getWinner();\n    if(winner){\n      clearInterval(actualizarPartida);\n    }}\n  , 5000);\n  clearInterval(actualizarPartida);*/\n\n  function handleClick(i) {\n    if (squares[i] || winner) return;\n    \n    turno(i).then(() => {\n      setSquares(getBoard() || Array(9).fill(\"Err\"));\n      winner = getWinner();\n      setXIsNext(!xIsNext);\n    });\n    const actualizarPartida = setInterval(() => {\n      reloadBoard().then(() => {\n        if(squares !== getBoard()){\n          setSquares(getBoard() || Array(9).fill(null));\n          clearInterval(actualizarPartida);\n        }\n      });\n      winner = getWinner();\n      if(winner){\n        clearInterval(actualizarPartida);\n      }}\n    , 5000);\n  }\n\n  // Función para reiniciar el juego\n  function handleNewGame() {\n    createGame();\n    setSquares(getBoard() || Array(9).fill(null));\n  }\n\n  // Función para unirse a un juego\n  function handleJoinGame() {\n    joinGame()\n      .then((response) => {\n        console.log(\"Unido al juego\");\n        setSquares(getBoard() || Array(9).fill(null));\n      })\n      .catch((error) => {\n        console.error(\"Error al unirse al juego:\", error);\n      });\n      const actualizarPartida = setInterval(() => {\n        reloadBoard().then(() => {\n          if(squares !== getBoard()){\n            setSquares(getBoard() || Array(9).fill(null));\n            clearInterval(actualizarPartida);\n          }\n        });\n        winner = getWinner();\n        if(winner){\n          clearInterval(actualizarPartida);\n        }}\n      , 5000);\n  }\n\n  // useEffect para manejar los botones externos\n  useEffect(() => {\n    const newGameButton = document.getElementById(\"newGame\");\n    const joinGameButton = document.getElementById(\"joinGame\");\n\n    if (newGameButton) {\n      newGameButton.addEventListener(\"click\", handleNewGame);\n    }\n\n    if (joinGameButton) {\n      joinGameButton.addEventListener(\"click\", handleJoinGame);\n    }\n\n    // Cleanup para evitar múltiples listeners\n    return () => {\n      if (newGameButton) {\n        newGameButton.removeEventListener(\"click\", handleNewGame);\n      }\n      if (joinGameButton) {\n        joinGameButton.removeEventListener(\"click\", handleJoinGame);\n      }\n    };\n  }, []);\n\n  let status = winner ? `Ganador: ${winner}!` : `Siguiente jugador: ${winner}`;\n\n  return (\n    <>\n      <div className=\"status\">{status}</div>\n      <div className=\"board-row\">\n        <Square value={squares[0]} onSquareClick={() => handleClick(0)} />\n        <Square value={squares[1]} onSquareClick={() => handleClick(1)} />\n        <Square value={squares[2]} onSquareClick={() => handleClick(2)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[3]} onSquareClick={() => handleClick(3)} />\n        <Square value={squares[4]} onSquareClick={() => handleClick(4)} />\n        <Square value={squares[5]} onSquareClick={() => handleClick(5)} />\n      </div>\n      <div className=\"board-row\">\n        <Square value={squares[6]} onSquareClick={() => handleClick(6)} />\n        <Square value={squares[7]} onSquareClick={() => handleClick(7)} />\n        <Square value={squares[8]} onSquareClick={() => handleClick(8)} />\n      </div>\n    </>\n  );\n}\n\nfunction Square({ value, onSquareClick }) {\n  return (\n    <button className=\"square\" onClick={onSquareClick}>\n      {value}\n    </button>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}